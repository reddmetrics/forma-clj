<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>forma.trends.analysis documentation</title></head><body><div id="header"><h1><a href="index.html">Forma 0.2.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3>Namespaces</h3><ul><li><a href="forma.classify.logistic.html">forma.classify.logistic</a></li><li><a href="forma.date-time.html">forma.date-time</a></li><li><a href="forma.gfw.cdm.html">forma.gfw.cdm</a></li><li><a href="forma.hadoop.cli.html">forma.hadoop.cli</a></li><li><a href="forma.hadoop.io.html">forma.hadoop.io</a></li><li><a href="forma.hadoop.jobs.cdm.html">forma.hadoop.jobs.cdm</a></li><li><a href="forma.hadoop.jobs.forma.html">forma.hadoop.jobs.forma</a></li><li><a href="forma.hadoop.jobs.modis.html">forma.hadoop.jobs.modis</a></li><li><a href="forma.hadoop.jobs.neighbors.html">forma.hadoop.jobs.neighbors</a></li><li><a href="forma.hadoop.jobs.preprocess.html">forma.hadoop.jobs.preprocess</a></li><li><a href="forma.hadoop.jobs.scatter.html">forma.hadoop.jobs.scatter</a></li><li><a href="forma.hadoop.jobs.timeseries.html">forma.hadoop.jobs.timeseries</a></li><li><a href="forma.hadoop.pail.html">forma.hadoop.pail</a></li><li><a href="forma.hadoop.predicate.html">forma.hadoop.predicate</a></li><li><a href="forma.hoptree.html">forma.hoptree</a></li><li><a href="forma.matrix.jblas.html">forma.matrix.jblas</a></li><li><a href="forma.matrix.utils.html">forma.matrix.utils</a></li><li><a href="forma.matrix.walk.html">forma.matrix.walk</a></li><li><a href="forma.ops.classify.html">forma.ops.classify</a></li><li><a href="forma.playground.html">forma.playground</a></li><li><a href="forma.postprocess.output.html">forma.postprocess.output</a></li><li><a href="forma.postprocess.select.html">forma.postprocess.select</a></li><li><a href="forma.reproject.html">forma.reproject</a></li><li><a href="forma.schema.html">forma.schema</a></li><li><a href="forma.source.fire.html">forma.source.fire</a></li><li><a href="forma.source.gadmiso.html">forma.source.gadmiso</a></li><li><a href="forma.source.hdf.html">forma.source.hdf</a></li><li><a href="forma.source.rain.html">forma.source.rain</a></li><li><a href="forma.source.static.html">forma.source.static</a></li><li><a href="forma.source.tilesets.html">forma.source.tilesets</a></li><li><a href="forma.static.html">forma.static</a></li><li><a href="forma.testing.html">forma.testing</a></li><li><a href="forma.thrift.html">forma.thrift</a></li><li class="current"><a href="forma.trends.analysis.html">forma.trends.analysis</a></li><li><a href="forma.trends.filter.html">forma.trends.filter</a></li><li><a href="forma.trends.stretch.html">forma.trends.stretch</a></li><li><a href="forma.utils.html">forma.utils</a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="forma.trends.analysis.html#var-first-order-conditions">first-order-conditions</a></li><li><a href="forma.trends.analysis.html#var-grab-trend">grab-trend</a></li><li><a href="forma.trends.analysis.html#var-hansen-stat">hansen-stat</a></li><li><a href="forma.trends.analysis.html#var-linear-residuals">linear-residuals</a></li><li><a href="forma.trends.analysis.html#var-long-stats">long-stats</a></li><li><a href="forma.trends.analysis.html#var-pseudoinverse">pseudoinverse</a></li><li><a href="forma.trends.analysis.html#var-short-stat">short-stat</a></li><li><a href="forma.trends.analysis.html#var-trend-characteristics">trend-characteristics</a></li><li><a href="forma.trends.analysis.html#var-trend-mat">trend-mat</a></li><li><a href="forma.trends.analysis.html#var-windowed-trend">windowed-trend</a></li></ul></div><div class="namespace-docs" id="content"><h2>forma.trends.analysis documentation</h2><pre class="doc"></pre><div class="public" id="var-first-order-conditions"><h3>first-order-conditions</h3><div class="usage"><code>(first-order-conditions ts)</code></div><pre class="doc">returns an incanter matrix of dimension 3xT, where T is the number
of periods in the supplied time series `ts`.  The values are based
on a regression of `ts` on a constant and an index. The first row is
the residual weighted time step variable; the values of the second
row are the residuals themselves; and the third row is demeaned
squared residuals.  The matrix collects the first order conditions
$f_t$ in the Hansen (1992) reference listed below.

Example:
  (use 'forma.trends.data)
  (first-order-conditions (i/matrix ndvi))

References:
  Hansen, B. (1992) Testing for Parameter Instability in Linear Models,
  Journal for Policy Modeling, 14(4), pp. 517-533</pre></div><div class="public" id="var-grab-trend"><h3>grab-trend</h3><div class="usage"><code>(grab-trend pseudo-trend-mat coll)</code></div><pre class="doc">returns the trend coefficient from an OLS regression of a from an
ordinary least squares regression of a `coll` of values on an
intercept and time step.

Example:
  (use 'forma.trends.data)
  (def pseudo-mat (pseudoinverse (trend-mat 30)))
  (grab-trend pseudo-mat (take 30 ndvi))</pre></div><div class="public" id="var-hansen-stat"><h3>hansen-stat</h3><div class="usage"><code>(hansen-stat ts)</code></div><pre class="doc">returns the Hansen (1992) test statistic, based on (1) the
first-order conditions, and (2) the cumulative first-order
conditions.  Returns nil if the to-be-solved matrix is singular,
which mainly happens with constant time-series that have not been
filtered out properly.

Example:
  (hansen-stat ndvi) =&gt; 0.9113

Benchmark:
  (time (dotimes [_ 100] (hansen-stat ndvi)))
  =&gt; Elapsed time: 157.507924 msecs</pre></div><div class="public" id="var-linear-residuals"><h3>linear-residuals</h3><div class="usage"><code>(linear-residuals y x &amp; {:keys [intercept], :or {intercept true}})</code></div><pre class="doc">returns an incanter vector of residuals from a linear model; cribbed from
incanter.stats linear model.

Options:
  :intercept (default true)

Example:
  (use 'forma.trends.data)
  (linear-residuals ndvi (utils/idx ndvi))</pre></div><div class="public" id="var-long-stats"><h3>long-stats</h3><div class="usage"><code>(long-stats ts &amp; cofactors)</code></div><pre class="doc">returns a tuple with the trend coefficient and associated
t-statistic for the supplied time series `ts`, based on a linear
regression on an intercept, time step, and a variable number of
cofactors (e.g., rain).

Example:
  (use 'forma.trends.data)
  (long-stats ndvi rain) =&gt; (-1.2382 -0.9976)
  (long-stats ndvi)      =&gt; (-1.1430 -0.9183)</pre></div><div class="public" id="var-pseudoinverse"><h3>pseudoinverse</h3><div class="usage"><code>(pseudoinverse x)</code></div><pre class="doc">returns the pseudoinverse of a matrix `x`; the coefficient vector
of OLS is the dependent variable vector premultiplied by the
pseudoinverse of the cofactor matrix `x`.  Note that the dimensions
will be (k x N), where k is the number of regressors and N is the
number of observations.

Example:
  (pseudoinverse (trend-mat 10))

References:
  Moore-Penrose Pseudoinverse (wikipedia): goo.gl/TTJwv</pre></div><div class="public" id="var-short-stat"><h3>short-stat</h3><div class="usage"><code>(short-stat long-block short-block ts)</code></div><pre class="doc">returns a single value indicating the largest, short-term drop in
`ts`.  The long-block length indicates the block length over which
the trend coefficient is calculated; for NDVI analysis, should be of
length over 1 year.  The short-block length is used to smooth the
time-series.

Example:
  (short-stat 30 10 ndvi) =&gt; -63.3346</pre></div><div class="public" id="var-trend-characteristics"><h3>trend-characteristics</h3><div class="usage"><code>(trend-characteristics y x &amp; {:keys [intercept], :or {intercept true}})</code></div><pre class="doc">returns a nested vector of (1) the OLS coefficients from regressing
a vector `y` on cofactor matrix `x`, and (2) the associated
t-statistics, ordered appropriately.

Options:
  :intercept (default true)

Example:
  (use 'forma.trends.data)
  (trend-characteristics ndvi (utils/idx ndvi))
     =&gt; [[7312.6512 -1.1430] [37.4443 -0.9183]]</pre></div><div class="public" id="var-trend-mat"><h3>trend-mat</h3><div class="usage"><code>(trend-mat T)</code></div><pre class="doc">returns a Tx2 incanter matrix, with first column of ones and the
second column ranging from 1 through T.  Used as a cofactor matrix
to calculate short-term OLS coefficients.

Example:
  (trend-mat 10)
  (type (trend-mat 10)) =&gt; incanter.Matrix</pre></div><div class="public" id="var-windowed-trend"><h3>windowed-trend</h3><div class="usage"><code>(windowed-trend block-len ts)</code></div><pre class="doc">returns a vector of short-term trend coefficients of block length
`block-len`</pre></div></div></body></html>