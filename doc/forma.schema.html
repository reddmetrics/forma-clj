<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>forma.schema documentation</title></head><body><div id="header"><h1><a href="index.html">Forma 0.2.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="forma.classify.logistic.html"><span>forma.classify.logistic</span></a></li><li><a href="forma.date-time.html"><span>forma.date-time</span></a></li><li><a href="forma.gfw.cdm.html"><span>forma.gfw.cdm</span></a></li><li><a href="forma.hadoop.cli.html"><span>forma.hadoop.cli</span></a></li><li><a href="forma.hadoop.io.html"><span>forma.hadoop.io</span></a></li><li><a href="forma.hadoop.jobs.cdm.html"><span>forma.hadoop.jobs.cdm</span></a></li><li><a href="forma.hadoop.jobs.forma.html"><span>forma.hadoop.jobs.forma</span></a></li><li><a href="forma.hadoop.jobs.modis.html"><span>forma.hadoop.jobs.modis</span></a></li><li><a href="forma.hadoop.jobs.neighbors.html"><span>forma.hadoop.jobs.neighbors</span></a></li><li><a href="forma.hadoop.jobs.preprocess.html"><span>forma.hadoop.jobs.preprocess</span></a></li><li><a href="forma.hadoop.jobs.scatter.html"><span>forma.hadoop.jobs.scatter</span></a></li><li><a href="forma.hadoop.jobs.timeseries.html"><span>forma.hadoop.jobs.timeseries</span></a></li><li><a href="forma.hadoop.pail.html"><span>forma.hadoop.pail</span></a></li><li><a href="forma.hadoop.predicate.html"><span>forma.hadoop.predicate</span></a></li><li><a href="forma.hoptree.html"><span>forma.hoptree</span></a></li><li><a href="forma.matrix.utils.html"><span>forma.matrix.utils</span></a></li><li><a href="forma.matrix.walk.html"><span>forma.matrix.walk</span></a></li><li><a href="forma.ops.classify.html"><span>forma.ops.classify</span></a></li><li><a href="forma.playground.html"><span>forma.playground</span></a></li><li><a href="forma.postprocess.output.html"><span>forma.postprocess.output</span></a></li><li><a href="forma.reproject.html"><span>forma.reproject</span></a></li><li class="current"><a href="forma.schema.html"><span>forma.schema</span></a></li><li><a href="forma.source.fire.html"><span>forma.source.fire</span></a></li><li><a href="forma.source.gadmiso.html"><span>forma.source.gadmiso</span></a></li><li><a href="forma.source.hdf.html"><span>forma.source.hdf</span></a></li><li><a href="forma.source.rain.html"><span>forma.source.rain</span></a></li><li><a href="forma.source.static.html"><span>forma.source.static</span></a></li><li><a href="forma.source.tilesets.html"><span>forma.source.tilesets</span></a></li><li><a href="forma.static.html"><span>forma.static</span></a></li><li><a href="forma.testing.html"><span>forma.testing</span></a></li><li><a href="forma.thrift.html"><span>forma.thrift</span></a></li><li><a href="forma.trends.analysis.html"><span>forma.trends.analysis</span></a></li><li><a href="forma.trends.filter.html"><span>forma.trends.filter</span></a></li><li><a href="forma.trends.stretch.html"><span>forma.trends.stretch</span></a></li><li><a href="forma.utils.html"><span>forma.utils</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="forma.schema.html#var-add-fires"><span>add-fires</span></a></li><li><a href="forma.schema.html#var-adjust"><span>adjust</span></a></li><li><a href="forma.schema.html#var-adjust-fires"><span>adjust-fires</span></a></li><li><a href="forma.schema.html#var-boundaries"><span>boundaries</span></a></li><li><a href="forma.schema.html#var-combine-neighbors"><span>combine-neighbors</span></a></li><li><a href="forma.schema.html#var-create-timeseries"><span>create-timeseries</span></a></li><li><a href="forma.schema.html#var-empty-neighbor-val"><span>empty-neighbor-val</span></a></li><li><a href="forma.schema.html#var-fires-cleanup"><span>fires-cleanup</span></a></li><li><a href="forma.schema.html#var-forma-seq"><span>forma-seq</span></a></li><li><a href="forma.schema.html#var-forma-value"><span>forma-value</span></a></li><li><a href="forma.schema.html#var-merge-neighbors"><span>merge-neighbors</span></a></li><li><a href="forma.schema.html#var-neighbor-value"><span>neighbor-value</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>forma.schema documentation</h2><pre class="doc">A set of functions to structure other queries.
</pre><div class="public" id="var-add-fires"><h3>add-fires</h3><div class="usage"><code>(add-fires &amp; f-tuples)</code></div><pre class="doc">Returns a new `FireValue` object generated by summing up the fields
of each of the supplied `FireValue` objects.</pre></div><div class="public" id="var-adjust"><h3>adjust</h3><div class="usage"><code>(adjust &amp; pairs)</code></div><pre class="doc">Appropriately truncates the incoming timeseries values (paired with
the initial integer period), and outputs a new start and both
truncated series.

Example usage:
  (adjust 0 [1 2 3 4] 1 [2 3 4 5]) =&gt; (1 [2 3 4] [2 3 4])</pre></div><div class="public" id="var-adjust-fires"><h3>adjust-fires</h3><div class="usage"><code>(adjust-fires {:keys [est-start est-end t-res]} f-series)</code></div><pre class="doc">Returns a TimeSeries object of fires that are within the bounds of
the interval defined by :est-start, :est-end, and :t-res.  Within
the FORMA workflow, this function is applied to a series of
FireValues that is longer (on the tail-end or both the tail- and
front-end) of the interval based on the info in the estimation
parameter map.  This series may not have any actual fire hits in it;
but rather is a vector of zero-value fires -- a sort of sparse
vector where each element is a FireValue.

TODO: preconditions to test that the supplied series matches the
description above.  Then adjust the description to be shorter, more
understandable.</pre></div><div class="public" id="var-boundaries"><h3>boundaries</h3><div class="usage"><code>(boundaries pair-seq)</code></div><pre class="doc">Accepts a sequence of pairs of &lt;initial time period, collection&gt;
and returns the maximum start period and the minimum end period.

Example usage:
  (boundaries [0 [1 2 3 4] 1 [2 3 4 5]]) =&gt; [1 4]</pre></div><div class="public" id="var-combine-neighbors"><h3>combine-neighbors</h3><div class="usage"><code>(combine-neighbors [x &amp; more])</code></div><pre class="doc">Returns a new forma neighbor value generated by merging together
each entry in the supplied sequence of forma values.  See tests for
example usage.</pre></div><div class="public" id="var-create-timeseries"><h3>create-timeseries</h3><div class="usage"><code>(create-timeseries start-idx series)</code><code>(create-timeseries start-idx end-idx series)</code></div><pre class="doc">Create a TimeSeries from a period start index and a collection of timeseries
values. The period end index is calculated by adding the size of the
collection to the period start index.</pre></div><div class="public" id="var-empty-neighbor-val"><h3>empty-neighbor-val</h3><div class="usage"></div><pre class="doc">Returns a NeighborValue object with values for a pixel that should
have an empty or nil value without breaking the process.  TODO:
figure out what values should be inserted for each feature to truly
represent the notion of emptiness.</pre></div><div class="public" id="var-fires-cleanup"><h3>fires-cleanup</h3><div class="usage"><code>(fires-cleanup fire-series)</code></div><pre class="doc">If the fire-series is nil, leave it be - it'll be handled in
`forma-seq-non-thrift`. Else, unpack it</pre></div><div class="public" id="var-forma-seq"><h3>forma-seq</h3><div class="usage"><code>(forma-seq fire-series short-series long-series t-stat-series break-series)</code></div><pre class="doc">Accepts 5 timeseries of equal length and starting position, each
 representing a time-indexed series of features for a given pixel.
 Returns the tranposition: a single timeseries of
 FormaValues.

`fire-series` gets special treatment because it could come into
 `forma-seq` as nil (i.e. no fires for a given pixel) per the
 forma-tap query in forma.clj; fires is an ungrounded variable in
 the cascalog query, forma-tap</pre></div><div class="public" id="var-forma-value"><h3>forma-value</h3><div class="usage"><code>(forma-value fire short param-break long t-stat)</code></div><pre class="doc">Returns a vector containing a FireValue, short-term drop,
parametrized break, long-term drop and t-stat of the short-term
drop.</pre></div><div class="public" id="var-merge-neighbors"><h3>merge-neighbors</h3><div class="usage"><code>(merge-neighbors neighbor-val forma-val)</code></div><pre class="doc">Merges the supplied instance of `FormaValue` into the existing
aggregate collection of `FormaValue`s represented by `neighbor-val`.
Returns a new neighbor value object representing the merged values.</pre></div><div class="public" id="var-neighbor-value"><h3>neighbor-value</h3><div class="usage"><code>(neighbor-value forma-val)</code><code>(neighbor-value fire neighbors avg-short min-short avg-long min-long avg-stat min-stat avg-param min-param)</code></div><pre class="doc">Accepts either a forma value or a sequence of sub-values.
</pre></div></div></body></html>