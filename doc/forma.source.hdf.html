<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>forma.source.hdf documentation</title></head><body><div id="header"><h1><a href="index.html">Forma 0.2.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="forma.classify.logistic.html"><span>forma.classify.logistic</span></a></li><li><a href="forma.date-time.html"><span>forma.date-time</span></a></li><li><a href="forma.gfw.cdm.html"><span>forma.gfw.cdm</span></a></li><li><a href="forma.hadoop.cli.html"><span>forma.hadoop.cli</span></a></li><li><a href="forma.hadoop.io.html"><span>forma.hadoop.io</span></a></li><li><a href="forma.hadoop.jobs.cdm.html"><span>forma.hadoop.jobs.cdm</span></a></li><li><a href="forma.hadoop.jobs.forma.html"><span>forma.hadoop.jobs.forma</span></a></li><li><a href="forma.hadoop.jobs.modis.html"><span>forma.hadoop.jobs.modis</span></a></li><li><a href="forma.hadoop.jobs.neighbors.html"><span>forma.hadoop.jobs.neighbors</span></a></li><li><a href="forma.hadoop.jobs.preprocess.html"><span>forma.hadoop.jobs.preprocess</span></a></li><li><a href="forma.hadoop.jobs.scatter.html"><span>forma.hadoop.jobs.scatter</span></a></li><li><a href="forma.hadoop.jobs.timeseries.html"><span>forma.hadoop.jobs.timeseries</span></a></li><li><a href="forma.hadoop.pail.html"><span>forma.hadoop.pail</span></a></li><li><a href="forma.hadoop.predicate.html"><span>forma.hadoop.predicate</span></a></li><li><a href="forma.hoptree.html"><span>forma.hoptree</span></a></li><li><a href="forma.matrix.utils.html"><span>forma.matrix.utils</span></a></li><li><a href="forma.matrix.walk.html"><span>forma.matrix.walk</span></a></li><li><a href="forma.ops.classify.html"><span>forma.ops.classify</span></a></li><li><a href="forma.playground.html"><span>forma.playground</span></a></li><li><a href="forma.postprocess.output.html"><span>forma.postprocess.output</span></a></li><li><a href="forma.reproject.html"><span>forma.reproject</span></a></li><li><a href="forma.schema.html"><span>forma.schema</span></a></li><li><a href="forma.source.fire.html"><span>forma.source.fire</span></a></li><li><a href="forma.source.gadmiso.html"><span>forma.source.gadmiso</span></a></li><li class="current"><a href="forma.source.hdf.html"><span>forma.source.hdf</span></a></li><li><a href="forma.source.rain.html"><span>forma.source.rain</span></a></li><li><a href="forma.source.static.html"><span>forma.source.static</span></a></li><li><a href="forma.source.tilesets.html"><span>forma.source.tilesets</span></a></li><li><a href="forma.static.html"><span>forma.static</span></a></li><li><a href="forma.testing.html"><span>forma.testing</span></a></li><li><a href="forma.thrift.html"><span>forma.thrift</span></a></li><li><a href="forma.trends.analysis.html"><span>forma.trends.analysis</span></a></li><li><a href="forma.trends.filter.html"><span>forma.trends.filter</span></a></li><li><a href="forma.trends.stretch.html"><span>forma.trends.stretch</span></a></li><li><a href="forma.utils.html"><span>forma.utils</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="forma.source.hdf.html#var-dataset-filter"><span>dataset-filter</span></a></li><li><a href="forma.source.hdf.html#var-make-subdataset"><span>make-subdataset</span></a></li><li><a href="forma.source.hdf.html#var-meta-values"><span>meta-values</span></a></li><li><a href="forma.source.hdf.html#var-metadata"><span>metadata</span></a></li><li><a href="forma.source.hdf.html#var-modis-chunks"><span>modis-chunks</span></a></li><li><a href="forma.source.hdf.html#var-modis-subsets"><span>modis-subsets</span></a></li><li><a href="forma.source.hdf.html#var-raster-chunks"><span>raster-chunks</span></a></li><li><a href="forma.source.hdf.html#var-split-id"><span>split-id</span></a></li><li><a href="forma.source.hdf.html#var-subdataset-key"><span>subdataset-key</span></a></li><li><a href="forma.source.hdf.html#var-subdataset-names"><span>subdataset-names</span></a></li><li><a href="forma.source.hdf.html#var-tileid-%3Eres"><span>tileid-&gt;res</span></a></li><li><a href="forma.source.hdf.html#var-unpack-modis"><span>unpack-modis</span></a></li><li><a href="forma.source.hdf.html#var-with-gdal-open"><span>with-gdal-open</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>forma.source.hdf documentation</h2><pre class="doc"></pre><div class="public" id="var-dataset-filter"><h3>dataset-filter</h3><div class="usage"><code>(dataset-filter good-keys)</code></div><pre class="doc">Generates a predicate function that checks a name from the
SUBDATASETS metadata dictionary against the supplied collection of
acceptable dataset keys.</pre></div><div class="public" id="var-make-subdataset"><h3>make-subdataset</h3><div class="usage"><code>(make-subdataset path)</code></div><pre class="doc">Accepts a filepath from the SUBDATASETS dictionary of a MODIS Dataset,
and returns a 2-tuple consisting of the modis-subsets key (&quot;ndvi&quot;)
 and a gdal.Dataset object representing the unpacked MODIS data.</pre></div><div class="public" id="var-meta-values"><h3>meta-values</h3><div class="usage"><code>(meta-values dataset)</code></div><pre class="doc">Returns metadata values for a given unpacked MODIS Dataset,
corresponding to the supplied seq of keys.</pre></div><div class="public" id="var-metadata"><h3>metadata</h3><div class="usage"><code>(metadata modis)</code><code>(metadata modis key)</code></div><pre class="doc">Returns the metadata map for the supplied MODIS Dataset.
</pre></div><div class="public" id="var-modis-chunks"><h3>modis-chunks</h3><div class="usage"><code>(modis-chunks datasets chunk-size source)</code></div><pre class="doc">Takes a cascading source, and returns a number of tuples that fully
describe chunks of MODIS data for the supplied datasets. Chunks are
represented as seqs of floats. Be sure to convert chunks to vector
before running any sort of data analysis, as seqs require linear
time for lookups.</pre></div><div class="public" id="var-modis-subsets"><h3>modis-subsets</h3><div class="usage"></div><pre class="doc">Map between MODIS dataset identifiers (arbitrarily chosen by the
REDD team) and corresponding unique substrings, culled from values
in the &quot;NAMES&quot; entries of the SUBDATASETS hashtable of MOD13A3 HDF
file. No simple, descriptive tag exists within the metadata, as of
2/05/2011, so this ends up being the best solution.</pre></div><div class="public" id="var-raster-chunks"><h3>raster-chunks</h3><div class="usage"><code>(raster-chunks data)</code></div><pre class="doc">Unpacks the data inside of a MODIS band and partitions it into
chunks sized according to the supplied value. Specifically, returns
a lazy sequence of 2-tuples of the form `[chunk-index, vector]`.</pre></div><div class="public" id="var-split-id"><h3>split-id</h3><div class="usage"><code>(split-id tileid)</code></div><pre class="doc">Returns a sequence containing the modis h and v coordinates, where
h and v refer to the MODIS tile referenced by the supplied
TileID. The precondition makes sure that the processed product uses
a sinusoial projection.</pre></div><div class="public" id="var-subdataset-key"><h3>subdataset-key</h3><div class="usage"><code>(subdataset-key path)</code></div><pre class="doc">Takes a long-form path to a MODIS subdataset, and checks to see if
any of the values of the `modis-subsets` map can be found as
substrings. If we find one, we return the associated key, cast to a
string -- 'ndvi', for example.</pre></div><div class="public" id="var-subdataset-names"><h3>subdataset-names</h3><div class="usage"><code>(subdataset-names hdf-path)</code></div><pre class="doc">Returns the NAME entries of the SUBDATASETS metadata map for the
dataset at a given filepath.</pre></div><div class="public" id="var-tileid-%3Eres"><h3>tileid-&gt;res</h3><div class="usage"><code>(tileid-&gt;res tileid)</code></div><pre class="doc">Returns a string representation of the resolution (in meters) of
the tile data referenced by the supplied TileID.The second character
of a MODIS TileID acts as a key to retrieve this data.</pre></div><div class="public" id="var-unpack-modis"><h3>unpack-modis</h3><div class="usage"><code>(unpack-modis)</code><code>(unpack-modis tdir stream)</code><code>(unpack-modis tdir)</code></div><pre class="doc">Stateful approach to unpacking HDF files. Registers all gdal
formats, Creates a temp directory, then saves the byte array to
disk. This byte array is processed with gdal. On teardown, the temp
directory is destroyed. Function returns the decompressed MODIS file
as a 1-tuple.</pre></div><div class="public" id="var-with-gdal-open"><h3>with-gdal-open</h3><div class="usage"><code>(with-gdal-open [sym path] &amp; body)</code></div><pre class="doc">Accepts a vector containing a symbol and a path to a file capable
of being opened with `gdal/Open`, and binds the opened dataset to
the supplied symbol.</pre></div></div></body></html>