<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>forma.hadoop.jobs.forma documentation</title></head><body><div id="header"><h1><a href="index.html">Forma 0.2.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3>Namespaces</h3><ul><li><a href="forma.classify.logistic.html">forma.classify.logistic</a></li><li><a href="forma.date-time.html">forma.date-time</a></li><li><a href="forma.gfw.cdm.html">forma.gfw.cdm</a></li><li><a href="forma.hadoop.cli.html">forma.hadoop.cli</a></li><li><a href="forma.hadoop.io.html">forma.hadoop.io</a></li><li><a href="forma.hadoop.jobs.cdm.html">forma.hadoop.jobs.cdm</a></li><li class="current"><a href="forma.hadoop.jobs.forma.html">forma.hadoop.jobs.forma</a></li><li><a href="forma.hadoop.jobs.modis.html">forma.hadoop.jobs.modis</a></li><li><a href="forma.hadoop.jobs.neighbors.html">forma.hadoop.jobs.neighbors</a></li><li><a href="forma.hadoop.jobs.preprocess.html">forma.hadoop.jobs.preprocess</a></li><li><a href="forma.hadoop.jobs.scatter.html">forma.hadoop.jobs.scatter</a></li><li><a href="forma.hadoop.jobs.timeseries.html">forma.hadoop.jobs.timeseries</a></li><li><a href="forma.hadoop.pail.html">forma.hadoop.pail</a></li><li><a href="forma.hadoop.predicate.html">forma.hadoop.predicate</a></li><li><a href="forma.hoptree.html">forma.hoptree</a></li><li><a href="forma.matrix.jblas.html">forma.matrix.jblas</a></li><li><a href="forma.matrix.utils.html">forma.matrix.utils</a></li><li><a href="forma.matrix.walk.html">forma.matrix.walk</a></li><li><a href="forma.ops.classify.html">forma.ops.classify</a></li><li><a href="forma.playground.html">forma.playground</a></li><li><a href="forma.postprocess.output.html">forma.postprocess.output</a></li><li><a href="forma.postprocess.select.html">forma.postprocess.select</a></li><li><a href="forma.reproject.html">forma.reproject</a></li><li><a href="forma.schema.html">forma.schema</a></li><li><a href="forma.source.fire.html">forma.source.fire</a></li><li><a href="forma.source.gadmiso.html">forma.source.gadmiso</a></li><li><a href="forma.source.hdf.html">forma.source.hdf</a></li><li><a href="forma.source.rain.html">forma.source.rain</a></li><li><a href="forma.source.static.html">forma.source.static</a></li><li><a href="forma.source.tilesets.html">forma.source.tilesets</a></li><li><a href="forma.static.html">forma.static</a></li><li><a href="forma.testing.html">forma.testing</a></li><li><a href="forma.thrift.html">forma.thrift</a></li><li><a href="forma.trends.analysis.html">forma.trends.analysis</a></li><li><a href="forma.trends.filter.html">forma.trends.filter</a></li><li><a href="forma.trends.stretch.html">forma.trends.stretch</a></li><li><a href="forma.utils.html">forma.utils</a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="forma.hadoop.jobs.forma.html#var-analyze-trends">analyze-trends</a></li><li><a href="forma.hadoop.jobs.forma.html#var-beta-data-prep">beta-data-prep</a></li><li><a href="forma.hadoop.jobs.forma.html#var-beta-gen">beta-gen</a></li><li><a href="forma.hadoop.jobs.forma.html#var-consolidate-static">consolidate-static</a></li><li><a href="forma.hadoop.jobs.forma.html#var-dynamic-clean">dynamic-clean</a></li><li><a href="forma.hadoop.jobs.forma.html#var-dynamic-filter">dynamic-filter</a></li><li><a href="forma.hadoop.jobs.forma.html#var-fire-tap">fire-tap</a></li><li><a href="forma.hadoop.jobs.forma.html#var-forma-estimate">forma-estimate</a></li><li><a href="forma.hadoop.jobs.forma.html#var-forma-query">forma-query</a></li><li><a href="forma.hadoop.jobs.forma.html#var-forma-tap">forma-tap</a></li><li><a href="forma.hadoop.jobs.forma.html#var-process-neighbors">process-neighbors</a></li><li><a href="forma.hadoop.jobs.forma.html#var-tele-clean">tele-clean</a></li><li><a href="forma.hadoop.jobs.forma.html#var-unnest-all">unnest-all</a></li><li><a href="forma.hadoop.jobs.forma.html#var-unnest-series">unnest-series</a></li></ul></div><div class="namespace-docs" id="content"><h2>forma.hadoop.jobs.forma documentation</h2><pre class="doc"></pre><div class="public" id="var-analyze-trends"><h3>analyze-trends</h3><div class="usage"><code>(analyze-trends est-map clean-src)</code></div><pre class="doc">Accepts an est-map, and sources for ndvi and rain timeseries and
vcf values split up by pixel.

We break this apart from dynamic-filter to force the filtering to
occur before the analysis. Note that all variable names within this
query are TIMESERIES, not individual values.</pre></div><div class="public" id="var-beta-data-prep"><h3>beta-data-prep</h3><div class="usage"><code>(beta-data-prep {:keys [t-res est-start min-coast-dist]} dynamic-src static-src)</code></div><pre class="doc">for example, static-path can equal this on dan's local machine:
&quot;/mnt/hgfs/Dropbox/local/static-out&quot;</pre></div><div class="public" id="var-beta-gen"><h3>beta-gen</h3><div class="usage"><code>(beta-gen {:keys [t-res est-start ridge-const convergence-thresh max-iterations min-coast-dist]} src)</code></div><pre class="doc">query to return the beta vector associated with each ecoregion
</pre></div><div class="public" id="var-consolidate-static"><h3>consolidate-static</h3><div class="usage"><code>(consolidate-static vcf-limit vcf-src gadm-src hansen-src ecoid-src border-src)</code></div><pre class="doc">Due to an issue with Pail, we consolidate separate sequence files
of static data with one big join</pre></div><div class="public" id="var-dynamic-clean"><h3>dynamic-clean</h3><div class="usage"><code>(dynamic-clean est-map dynamic-src)</code></div><pre class="doc">Accepts an est-map, and sources for ndvi and rain timeseries and
vcf values split up by pixel.

We break this apart from dynamic-filter to force the filtering to
occur before the analysis. Note that all variable names within this
query are TIMESERIES, not individual values.</pre></div><div class="public" id="var-dynamic-filter"><h3>dynamic-filter</h3><div class="usage"><code>(dynamic-filter ndvi-src reli-src rain-src)</code></div><pre class="doc">Returns a new generator of ndvi and rain timeseries obtained by
filtering out all pixels with VCF less than the supplied
`vcf-limit`.</pre></div><div class="public" id="var-fire-tap"><h3>fire-tap</h3><div class="usage"><code>(fire-tap est-map fire-src)</code></div><pre class="doc">Accepts an est-map and a query source of fire timeseries. Note that
this won't work, pulling directly from the pail!</pre></div><div class="public" id="var-forma-estimate"><h3>forma-estimate</h3><div class="usage"><code>(forma-estimate beta-src dynamic-src static-src)</code></div><pre class="doc">query to end all queries: estimate the probabilities for each
period after the training period.</pre></div><div class="public" id="var-forma-query"><h3>forma-query</h3><div class="usage"><code>(forma-query est-map forma-val-src)</code></div><pre class="doc">final query that walks the neighbors and spits out the values.
</pre></div><div class="public" id="var-forma-tap"><h3>forma-tap</h3><div class="usage"><code>(forma-tap t-res est-map dynamic-src fire-src)</code></div><pre class="doc">Accepts an est-map and sources for 

Note that all values internally discuss timeseries.

Also note that !!fire is an ungrounding variable, and triggers a
left join with the trend result variables.</pre></div><div class="public" id="var-process-neighbors"><h3>process-neighbors</h3><div class="usage"><code>(process-neighbors window)</code></div><pre class="doc">Processes all neighbors... Returns the index within the chunk, the
value, and the aggregate of the neighbors.</pre></div><div class="public" id="var-tele-clean"><h3>tele-clean</h3><div class="usage"><code>(tele-clean {:keys [est-start est-end t-res]} good-set bad-set start-period val-ts reli-ts)</code></div><pre class="doc">Return clean timeseries with telescoping window, nil if no (or not
enough) good training data</pre></div><div class="public" id="var-unnest-all"><h3>unnest-all</h3><div class="usage"><code>(unnest-all &amp; series)</code></div><pre class="doc">Unnest series coming out of trends-cleanup of form
[[&quot;500&quot; 28 8 0 0 693 694 [[0.1 0.1]] [[0.2 0.2]] [[0.3 0.3]] [[0.4 0.4]]]]</pre></div><div class="public" id="var-unnest-series"><h3>unnest-series</h3><div class="usage"><code>(unnest-series series)</code></div><pre class="doc">Remove extraneous vectors from around a series
</pre></div></div></body></html>