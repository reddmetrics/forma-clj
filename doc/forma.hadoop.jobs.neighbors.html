<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>forma.hadoop.jobs.neighbors documentation</title></head><body><div id="header"><h1><a href="index.html">Forma 0.2.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3>Namespaces</h3><ul><li><a href="forma.classify.logistic.html">forma.classify.logistic</a></li><li><a href="forma.date-time.html">forma.date-time</a></li><li><a href="forma.gfw.cdm.html">forma.gfw.cdm</a></li><li><a href="forma.hadoop.cli.html">forma.hadoop.cli</a></li><li><a href="forma.hadoop.io.html">forma.hadoop.io</a></li><li><a href="forma.hadoop.jobs.cdm.html">forma.hadoop.jobs.cdm</a></li><li><a href="forma.hadoop.jobs.forma.html">forma.hadoop.jobs.forma</a></li><li><a href="forma.hadoop.jobs.modis.html">forma.hadoop.jobs.modis</a></li><li class="current"><a href="forma.hadoop.jobs.neighbors.html">forma.hadoop.jobs.neighbors</a></li><li><a href="forma.hadoop.jobs.preprocess.html">forma.hadoop.jobs.preprocess</a></li><li><a href="forma.hadoop.jobs.scatter.html">forma.hadoop.jobs.scatter</a></li><li><a href="forma.hadoop.jobs.timeseries.html">forma.hadoop.jobs.timeseries</a></li><li><a href="forma.hadoop.pail.html">forma.hadoop.pail</a></li><li><a href="forma.hadoop.predicate.html">forma.hadoop.predicate</a></li><li><a href="forma.hoptree.html">forma.hoptree</a></li><li><a href="forma.matrix.jblas.html">forma.matrix.jblas</a></li><li><a href="forma.matrix.utils.html">forma.matrix.utils</a></li><li><a href="forma.matrix.walk.html">forma.matrix.walk</a></li><li><a href="forma.ops.classify.html">forma.ops.classify</a></li><li><a href="forma.playground.html">forma.playground</a></li><li><a href="forma.postprocess.output.html">forma.postprocess.output</a></li><li><a href="forma.postprocess.select.html">forma.postprocess.select</a></li><li><a href="forma.reproject.html">forma.reproject</a></li><li><a href="forma.schema.html">forma.schema</a></li><li><a href="forma.source.fire.html">forma.source.fire</a></li><li><a href="forma.source.gadmiso.html">forma.source.gadmiso</a></li><li><a href="forma.source.hdf.html">forma.source.hdf</a></li><li><a href="forma.source.rain.html">forma.source.rain</a></li><li><a href="forma.source.static.html">forma.source.static</a></li><li><a href="forma.source.tilesets.html">forma.source.tilesets</a></li><li><a href="forma.static.html">forma.static</a></li><li><a href="forma.testing.html">forma.testing</a></li><li><a href="forma.thrift.html">forma.thrift</a></li><li><a href="forma.trends.analysis.html">forma.trends.analysis</a></li><li><a href="forma.trends.filter.html">forma.trends.filter</a></li><li><a href="forma.trends.stretch.html">forma.trends.stretch</a></li><li><a href="forma.utils.html">forma.utils</a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="forma.hadoop.jobs.neighbors.html#var-assign-vals">assign-vals</a></li><li><a href="forma.hadoop.jobs.neighbors.html#var-create-window">create-window</a></li><li><a href="forma.hadoop.jobs.neighbors.html#var-filtered-sample-query">filtered-sample-query</a></li><li><a href="forma.hadoop.jobs.neighbors.html#var-global-coll-%3Ewindow-coll">global-coll-&gt;window-coll</a></li><li><a href="forma.hadoop.jobs.neighbors.html#var-neighbor-src">neighbor-src</a></li><li><a href="forma.hadoop.jobs.neighbors.html#var-neighbors">neighbors</a></li><li><a href="forma.hadoop.jobs.neighbors.html#var-process-neighbors">process-neighbors</a></li><li><a href="forma.hadoop.jobs.neighbors.html#var-sample-query">sample-query</a></li><li><a href="forma.hadoop.jobs.neighbors.html#var-window-attribute-src">window-attribute-src</a></li><li><a href="forma.hadoop.jobs.neighbors.html#var-window-map">window-map</a></li></ul></div><div class="namespace-docs" id="content"><h2>forma.hadoop.jobs.neighbors documentation</h2><pre class="doc"></pre><div class="public" id="var-assign-vals"><h3>assign-vals</h3><div class="usage"><code>(assign-vals tuples)</code></div><pre class="doc">Accepts a sequence of tuples within a `?group` field and returns a
sequence of tuples with fields for a global-index and
smoothed-value; in this case, the sum of all neighboring pixel
values.</pre></div><div class="public" id="var-create-window"><h3>create-window</h3><div class="usage"><code>(create-window window-coll &amp; {:keys [nrows ncols], :or {nrows 0, ncols 0}})</code></div><pre class="doc">Acceots a sequence of tuples of the form [idx val], where idx is
the unique identifier of the pixel within a designated window.</pre></div><div class="public" id="var-filtered-sample-query"><h3>filtered-sample-query</h3><div class="usage"><code>(filtered-sample-query sres select-src full-src)</code></div><pre class="doc">Filters the `sample-query` return values, so that only the indices
that are contained within the selected pixel source are returned.</pre></div><div class="public" id="var-global-coll-%3Ewindow-coll"><h3>global-coll-&gt;window-coll</h3><div class="usage"><code>(global-coll-&gt;window-coll sres wmap idx-val)</code></div><pre class="doc">Accepts a spatial resolution, a map that identifies a MODIS window,
and a sequence of tuples of the form [idx val], where the index is
the unique global index.  Returns the same form where the index has
been transformed to the relative window index.</pre></div><div class="public" id="var-neighbor-src"><h3>neighbor-src</h3><div class="usage"><code>(neighbor-src sres select-src)</code></div><pre class="doc">Accepts a source with the MODIS coordinates and group ID (e.g.,
GADM) of a selection of pixels.  Returns a tap with the unique,
global pixel IDs of all neighbors that are relevant for neighbor
analysis for a selection of pixels.</pre></div><div class="public" id="var-neighbors"><h3>neighbors</h3><div class="usage"><code>(neighbors sres idx)</code></div><pre class="doc">Accepts a spatial resolution and a unique, global index for a
single pixel. Returns a sequence of indices of the 8 adjacent pixels
to the supplied pixel, as well as the own-pixel index.</pre></div><div class="public" id="var-process-neighbors"><h3>process-neighbors</h3><div class="usage"><code>(process-neighbors sres wmap f window-mat)</code></div><pre class="doc">Accepts a spatial resolution, a map of window parameters, a
function to apply over a 9-pixel square of neighbors, and a
rectangular matrix of pixel-level values.  Returns a sequence of
tuples of the form [idx val] where the index is the global, unique
MODIS index and the value is the transformed values as a result of
spatial smoothing.</pre></div><div class="public" id="var-sample-query"><h3>sample-query</h3><div class="usage"><code>(sample-query sres select-src full-src)</code></div><pre class="doc">Accepts a spatial resolution; a selection of pixels for which
neighborhood attributes are required; and a full selection of
indices and values for the region that contains all the group-level
pixels.  Returns a tap with the transformed values assigned to the
full set of indices.</pre></div><div class="public" id="var-window-attribute-src"><h3>window-attribute-src</h3><div class="usage"><code>(window-attribute-src sres select-src full-src)</code></div><pre class="doc">Accepts two sources (1) coordinates and group ID of a selection of
pixels that are to be assigned neighbor values; (2) all pixels in
the region that contains the groups, so that all of the pixels
in (1) are represented.. Returns the selection of pixels and their
values that are relevant for neighbor processing by screening out
all unneccessary pixels.</pre></div><div class="public" id="var-window-map"><h3>window-map</h3><div class="usage"><code>(window-map sres global-idx-coll)</code></div><pre class="doc">Accepts a spatial resolution (as a string) and a collection of
global, unique indices.  Returns a defining map of the rectangular
window that bounds all pixels in the collection.  The window is
fully identified by the topleft corner in the form of [row
column], along with the width and height in pixels of the
rectangular window.</pre></div></div></body></html>